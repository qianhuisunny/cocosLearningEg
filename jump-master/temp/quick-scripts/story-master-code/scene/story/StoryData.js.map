{"version":3,"sources":["StoryData.js"],"names":["StoryConfig","require","module","exports","serializePlotArray","getUnitPiecePrefab","e","file","init","data","unit","t","piece","i","l","length","r","id","item","getBeganPrefab","plot","getPieceDataByID","getBeganPlot","getNextPlotData","_findValidPiece","serializePlot","_serializePlot","push","name","children","getPlotDataByPieceID","getPlotDataByID","getPieceDataByPlotID","getNextPieceItemByPrefabID","getNextPieceItemByKeyAndPrefab"],"mappings":"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","file":"StoryData.js","sourceRoot":"../../../../../../../../.CocosCreator/packages/story-master/code/scene/story","sourcesContent":["let StoryConfig=require(\"StoryConfig\");module.exports={serializePlotArray:[],getUnitPiecePrefab(){let e=StoryConfig.file.init.data;if(e.unit){let t=StoryConfig.file.piece.data;for(let i in t){let l=t[i];for(let t=0;t<l.length;t++){let r=l[t];if(r.id===e.unit)return{piece:i,item:r}}}return null}return null},getBeganPrefab(){let e=StoryConfig.file.plot.data[0].piece;return this.getPieceDataByID(e)[0]},getBeganPlot:()=>StoryConfig.file.plot.data[0],getNextPlotData(e){for(let t=0;t<this.serializePlotArray.length;t++){if(this.serializePlotArray[t].id===e)return t===this.serializePlotArray.length-1?null:this._findValidPiece(t+1)}return null},_findValidPiece(e){for(let t=e;t<this.serializePlotArray.length;t++){let e=this.serializePlotArray[t],i=this.getPieceDataByID(e.piece);if(i&&i.length>0)return e}return null},serializePlot(){let e=[],t=StoryConfig.file.plot.data;for(let i=0;i<t.length;i++){let l=t[i];this._serializePlot(l,e)}this.serializePlotArray=e},_serializePlot(e,t){t.push({id:e.id,name:e.name,piece:e.piece});for(let i=0;i<e.children.length;i++)this._serializePlot(e.children[i],t)},getPlotDataByPieceID(e){for(let t=0;t<this.serializePlotArray.length;t++){let i=this.serializePlotArray[t];if(i.piece===e)return i}return null},getPlotDataByID(e){for(let t=0;t<this.serializePlotArray.length;t++){let i=this.serializePlotArray[t];if(i.id===e)return i}return null},getPieceDataByPlotID(e){let t=this.getPlotDataByID(e);if(t){return this.getPieceDataByID(t.piece)}return null},getPieceDataByID(e){let t=StoryConfig.file.piece.data;for(let i in t){let l=t[i];if(i===e)return l}return null},getNextPieceItemByPrefabID(e){let t=StoryConfig.file.piece.data;for(let i in t){let l=t[i];for(let t=0;t<l.length;t++){if(l[t].id===e)return t+1>=l.length?null:l[t+1]}}return null},getNextPieceItemByKeyAndPrefab(e,t){let i=StoryConfig.file.piece.data;if(i&&i[e]){let l=i[e];for(let e=0;e<l.length;e++){if(l[e].id===t)return e+1>=l.length?null:l[e+1]}}}};"]}